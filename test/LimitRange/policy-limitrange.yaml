apiVersion : kyverno.io/v1alpha1
kind : ClusterPolicy
metadata :
  name : policy-limitrange
spec :
  rules:
    - name: "rule"
      match:
        resources:
          kinds :
          - LimitRange
          selector:
            matchLabels:
              containerSize: minimal
      mutate:
        patches:
        - path : "/spec/limits/0/default/memory"
          op : add
          value: 384Mi
      validate:
        message: "The CPU value is incorrect"
        pattern:
          spec:
            limits:
            - default:
                cpu: 10m
